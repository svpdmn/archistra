<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>archistra chat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="scripts/tailwind-theme.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&family=Tektur:wght@400;500;600;700;800;900&family=Geo:wght@400&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/theme.css">
</head>
<body class="grid-pattern">
    <div id="site-nav" data-page="chat"></div>

    <main class="relative z-10 min-h-screen px-4 pt-24 pb-8 sm:px-6 sm:pt-28 u-font-ui">
        <section class="mx-auto flex min-h-[72vh] w-full max-w-5xl flex-col overflow-hidden card-strong rounded-xl2" style="border: 1px solid rgba(255, 255, 255, 0.14);">
            <div class="border-b u-border-subtle px-4 py-5 sm:px-6 sm:py-6 text-center">
                <div class="u-font-code text-accent-400 text-xs tracking-widest mb-2">CHAT INTERFACE</div>
                <h2 class="text-2xl sm:text-3xl font-display font-bold">Conversation Workspace</h2>
            </div>
            <div class="border-b u-border-subtle px-4 py-3 sm:px-6">
                <span class="badge badge-chat u-font-code tracking-wide">Session: prototype-chat-001</span>
            </div>

                <div id="messages" class="flex-1 space-y-4 overflow-y-auto px-4 py-5 sm:px-6">
                    <article class="max-w-3xl">
                        <p class="mb-2 u-font-code text-[11px] tracking-wider text-accent-400">ASSISTANT</p>
                        <div class="card rounded-md p-4" style="border: 0.5px solid rgba(255, 255, 255, 0.10);">
                            <p class="u-text-1 u-font-code text-[11px]">Hello. I can help draft architecture notes, summarize requirements, and generate implementation plans.</p>
                        </div>
                    </article>
                </div>

                <form id="composer" class="border-t u-border-subtle p-4 sm:p-6">
                    <label for="prompt" class="mb-2 block u-font-code text-[11px] tracking-wider text-accent-400">MESSAGE</label>
                    <div class="flex flex-col gap-3 sm:flex-row">
                    <textarea id="prompt" name="prompt" rows="2" class="chat-copy card w-full resize-none rounded-none bg-transparent px-4 py-3 u-text-1 placeholder:text-white/50 focus:outline-none" style="border: 0.5px solid rgba(255, 255, 255, 0.10);" placeholder="Type your message..." required></textarea>
                    <button type="submit" class="btn btn-primary w-full sm:w-auto px-6 py-3 text-[11px] font-semibold u-font-code">Send</button>
                </div>
                <div class="mt-2">
                    <span class="badge badge-chat u-font-code tracking-wide">Backend target: OpenAI API (to be connected server-side).</span>
                </div>
            </form>
        </section>
    </main>

    <script src="scripts/navbar.js"></script>
    <script>
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileMenuToggle && mobileMenu) {
            mobileMenuToggle.addEventListener('click', () => {
                const isExpanded = mobileMenuToggle.getAttribute('aria-expanded') === 'true';
                mobileMenu.classList.toggle('hidden');
                mobileMenuToggle.setAttribute('aria-expanded', String(!isExpanded));
            });

            window.addEventListener('resize', () => {
                if (window.innerWidth >= 768) {
                    mobileMenu.classList.add('hidden');
                    mobileMenuToggle.setAttribute('aria-expanded', 'false');
                }
            });
        }

        const composer = document.getElementById('composer');
        const prompt = document.getElementById('prompt');
        const messages = document.getElementById('messages');

        composer.addEventListener('submit', (event) => {
            event.preventDefault();
            const text = prompt.value.trim();
            if (!text) return;

            const userBlock = document.createElement('article');
            userBlock.className = 'ml-auto max-w-3xl';
            userBlock.innerHTML = `
                <p class="mb-2 text-right u-font-code text-[11px] tracking-wider text-accent-200">YOU</p>
                <div class="card rounded-md p-4" style="border: 0.5px solid rgba(255, 255, 255, 0.10);">
                    <p class="u-text-1 u-font-code text-[11px]"></p>
                </div>
            `;
            userBlock.querySelector('p.u-text-1').textContent = text;
            messages.appendChild(userBlock);

            const assistantBlock = document.createElement('article');
            assistantBlock.className = 'max-w-3xl';
            assistantBlock.innerHTML = `
                <p class="mb-2 u-font-code text-[11px] tracking-wider text-accent-400">ASSISTANT</p>
                <div class="card rounded-md p-4" style="border: 0.5px solid rgba(255, 255, 255, 0.10);">
                    <p class="u-text-1 u-font-code text-[11px]">[Placeholder] Wire this action to your backend endpoint that calls the OpenAI API.</p>
                </div>
            `;
            messages.appendChild(assistantBlock);

            prompt.value = '';
            messages.scrollTop = messages.scrollHeight;
        });
    </script>
</body>
</html>
